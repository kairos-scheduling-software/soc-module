!function(t){var e=[];t.tutorialize=function(e,i){i?t.tutorialize._instance(e,i):t.tutorialize.obj.init(e)},t.tutorialize.cleanRemember=function(i){if(i){if(!t.tutorialize.instanceExist)return;e[i].cleanRemember()}else t.tutorialize.obj.cleanRemember()},t.tutorialize.getCurrentIndex=function(i){if(i){if(!t.tutorialize.instanceExist)return;return e[i].currentSlideIdx}return t.tutorialize.obj.currentSlideIdx},t.tutorialize.getTotal=function(i){if(i){if(!t.tutorialize.instanceExist)return;return e[i].options.slides.length}return t.tutorialize.obj.options.slides.length},t.tutorialize.instanceExist=function(t){return e[t]?!0:!1},t.tutorialize.next=function(i){if(i){if(!t.tutorialize.instanceExist)return;e[i].nextSlide()}else t.tutorialize.obj.nextSlide()},t.tutorialize.prev=function(i){if(i){if(!t.tutorialize.instanceExist)return;e[i].prevSlide()}else t.tutorialize.obj.prevSlide()},t.tutorialize.start=function(i){if(i){if(!t.tutorialize.instanceExist)return;e[i].start()}else t.tutorialize.obj.start()},t.tutorialize.startAt=function(i,o){if(o){if(!t.tutorialize.instanceExist)return;e[o].start(i)}else t.tutorialize.obj.start(i)},t.tutorialize.stop=function(i){if(i){if(!t.tutorialize.instanceExist)return;e[i].stop()}else t.tutorialize.obj.stop()},t.tutorialize._instance=function(i,o){var r=Object.create(t.tutorialize.obj);return r.init(i,o),e[o]=t.data(this,"tutorialize",r),e[o]},t.tutorialize.defaults={slides:[],arrowOffset:0,arrowPath:"./arrows/arrow-blue.png",arrowSize:44,autoScroll:!0,bgColor:"#11a7df",borderRadius:"5px",buttonBgColor:"#0d8fbf",buttonFontColor:"#fff",effectDelay:500,fontColor:"#fff",fontSize:"13px",height:"auto",keyboardNavigation:!0,labelClose:"Close",labelEnd:"End",labelNext:"Next",labelPrevious:"Previous",labelStart:"Start",minWidth:80,minWidthCSS:160,overlayColor:"#000",overlayMode:"none",overlayOpacity:.5,overlayPadding:0,padding:20,remember:!1,rememberKeyName:"tutorialize-storage",rememberOnceOnly:!1,runEnd:"stop",runMode:"manual",runDuration:8e3,showButtonClose:!1,showButtonNext:!0,showButtonPrevious:!0,theme:"",width:200,onStart:null,onStop:null},t.tutorialize.obj={_scrollTopOffset:100,currentSlide:null,currentSlideIdx:-1,initialized:!1,instanceName:"instance0",options:null,stSlidePlay:null,lastSlide:null,lastSlideScrollPosition:0,tmpCurrentSlidePosition:"",tmpWinWidth:-1,$tutorializeElements:null,init:function(e,i){this.options=t.extend({},t.tutorialize.defaults,e),i&&(this.instanceName=i),this.options.rememberKeyName=this.options.rememberKeyName+"."+this.instanceName,this.check(),this.initDom()},initDom:function(){var e=this,i=t(window);0===t("#tutorialize-elements."+this.instanceName).length&&t("body").prepend('<div id="tutorialize-elements" data-instance="'+this.instanceName+'"></div>'),this.$tutorializeElements=t('#tutorialize-elements[data-instance="'+this.instanceName+'"]'),i.resize(function(){e.moveSlideOnResize(),"all"!=e.currentSlide.overlayMode&&e.moveOverlayOnResize()}),i.scroll(function(){"all"!=e.currentSlide.overlayMode&&e.moveOverlayOnResize()}),t(document).keyup(function(t){e.options.keyboardNavigation&&(39==t.keyCode&&e.nextSlide(),37==t.keyCode&&0!==e.currentSlideIdx&&e.prevSlide())})},cleanRemember:function(){localStorage.removeItem(this.options.rememberKeyName)},calculateSlideOverlay:function(e,i){if(i||"all"!==this.currentSlide.overlayMode&&"html"!==e.selector){var o=this.getDOMValues(),r=Math.round(e.offset().left-this.currentSlide.overlayPadding),n=Math.round(e.offset().top-this.currentSlide.overlayPadding-o.body.scrollTop),l=Math.round(e.outerWidth()+2*this.currentSlide.overlayPadding),s=Math.round(e.outerHeight()+2*this.currentSlide.overlayPadding);i||this.$tutorializeElements.prepend('<div class="tutorialize-slide-overlay top"></div><div class="tutorialize-slide-overlay left"></div><div class="tutorialize-slide-overlay right"></div><div class="tutorialize-slide-overlay bottom"></div>');var a=t(".tutorialize-slide-overlay.top"),d=t(".tutorialize-slide-overlay.left"),u=t(".tutorialize-slide-overlay.right"),c=t(".tutorialize-slide-overlay.bottom"),h=n+s;a.css({top:0,left:0,right:0,height:n,opacity:this.currentSlide.overlayOpacity,"background-color":this.currentSlide.overlayColor}),d.css({top:n,left:0,height:s,width:r,opacity:this.currentSlide.overlayOpacity,"background-color":this.currentSlide.overlayColor}),u.css({top:n,left:r+l,right:0,height:s,opacity:this.currentSlide.overlayOpacity,"background-color":this.currentSlide.overlayColor}),c.css({top:h,left:0,right:0,bottom:0,opacity:this.currentSlide.overlayOpacity,"background-color":this.currentSlide.overlayColor})}else{this.$tutorializeElements.prepend('<div class="tutorialize-slide-overlay"></div>');var p=t(".tutorialize-slide-overlay");p.css({top:0,left:0,right:0,bottom:0,opacity:this.currentSlide.overlayOpacity,"background-color":this.currentSlide.overlayColor})}},check:function(){return this.options.slides&&0!==this.options.slides.length?this.options.remember&&"undefined"==typeof Storage?(this.options.remember=!1,void alert("[Tutorialize Error] Your browser doesn't support web storage")):void 0:void alert("[Tutorialize Error] Slides undefined or Slides empty!")},checkSlidePositionExceed:function(t,e){var i=this.getDOMValues(),o=i.body.scrollLeft,r=i.body.scrollTop,n=[],l=(r>t.top,t.top+e.outerHeight()-r>i.win.height,o>t.left),s=t.left+e.outerWidth()>i.win.width;return l&&n.push("left"),s&&n.push("right"),n.length?n:!1},getArrowPosition:function(){var t={},e=-1*this.currentSlide.arrowSize;switch(this.currentSlide.position){case"center-center":break;case"top-left":t={"background-position":"0 -"+6*this.currentSlide.arrowSize+"px",bottom:e,left:"10%"};break;case"top-center":t={"background-position":"0 -"+7*this.currentSlide.arrowSize+"px",bottom:e,left:"50%","margin-left":this.currentSlide.arrowSize/2*-1};break;case"top-right":t={"background-position":"0 -"+8*this.currentSlide.arrowSize+"px",bottom:e,right:"10%"};break;case"left-top":t={"background-position":"0 -"+3*this.currentSlide.arrowSize+"px",right:e,top:"10%"};break;case"left-center":t={"background-position":"0 -"+4*this.currentSlide.arrowSize+"px","margin-top":this.currentSlide.arrowSize/2*-1,right:e,top:"50%"};break;case"left-bottom":t={bottom:"10%","background-position":"0 -"+5*this.currentSlide.arrowSize+"px",right:e};break;case"right-top":t={left:e,top:"10%"};break;case"right-center":t={"background-position":"0 -"+1*this.currentSlide.arrowSize+"px",left:e,"margin-top":this.currentSlide.arrowSize/2*-1,top:"50%"};break;case"right-bottom":t={"background-position":"0 -"+2*this.currentSlide.arrowSize+"px",left:e,bottom:"10%"};break;case"bottom-left":t={"background-position":"0 -"+9*this.currentSlide.arrowSize+"px",top:e,left:"10%"};break;case"bottom-center":t={"background-position":"0 -"+10*this.currentSlide.arrowSize+"px",top:e,left:"50%","margin-left":this.currentSlide.arrowSize/2*-1};break;case"bottom-right":t={"background-position":"0 -"+11*this.currentSlide.arrowSize+"px",top:e,right:"10%"}}return t},getDOMValues:function(){var e=t(window),i=t(document),o=t("body"),r={body:{scrollLeft:document.documentElement.scrollLeft?document.documentElement.scrollLeft:o.scrollLeft(),scrollTop:document.documentElement.scrollTop?document.documentElement.scrollTop:o.scrollTop()},doc:{height:i.height(),width:i.width()},win:{height:e.height(),width:e.width()}};return r},getRemember:function(){return this.options.remember?localStorage.getItem(this.options.rememberKeyName)?JSON.parse(localStorage.getItem(this.options.rememberKeyName)):!1:void 0},getSlideDefaultValues:function(t){return t.arrowOffset=t.arrowOffset?t.arrowOffset:this.options.arrowOffset,t.arrowPath=t.arrowPath?t.arrowPath:this.options.arrowPath,t.arrowSize=t.arrowSize?t.arrowSize:this.options.arrowSize,t.bgColor=t.bgColor?t.bgColor:this.options.bgColor,t.borderRadius=t.borderRadius?t.borderRadius:this.options.borderRadius,t.buttonBgColor=t.buttonBgColor?t.buttonBgColor:this.options.buttonBgColor,t.buttonFontColor=t.buttonFontColor?t.buttonFontColor:this.options.buttonFontColor,t.fontColor=t.fontColor?t.fontColor:this.options.fontColor,t.fontSize=t.fontSize?t.fontSize:this.options.fontSize,t.height=t.height?t.height:this.options.height,t.minWidth=t.minWidth?t.minWidth:this.options.minWidth,t.minWidthCSS=t.minWidthCSS?t.minWidthCSS:this.options.minWidthCSS,t.overlayColor=t.overlayColor?t.overlayColor:this.options.overlayColor,t.overlayMode=t.overlayMode?t.overlayMode:this.options.overlayMode,t.overlayOpacity=t.overlayOpacity?t.overlayOpacity:this.options.overlayOpacity,t.overlayPadding=t.overlayPadding?t.overlayPadding:this.options.overlayPadding,t.padding=t.padding?t.padding:this.options.padding,t.position=t.position&&-1!=["center-center","top-left","top-center","top-right","left-top","left-center","left-bottom","right-top","right-center","right-bottom","bottom-left","bottom-center","bottom-right"].indexOf(t.position)?"html"===t.selector?"center-center":t.position:"center-center",t.selector=t.selector?t.selector:"html",t.width=t.width?t.width:this.options.width,t},getSlidePosition:function(t,e){var i,o=this.getDOMValues(),r=t.offset().left,n="fixed"===t.css("position")?t.position().top-o.body.scrollTop:t.offset().top,l=t.outerWidth(),s="html"===e.attr("data-selector")?o.win.height:t.outerHeight(),a=e.outerWidth(),d=e.outerHeight(),u=0,c=e.attr("data-position"),h=c.split("-"),p={};switch(c){case"center-center":u=r+(l/2-a/2),i=n+(s/2-d/2);break;case"top-left":u=r,i=n-d;break;case"top-center":u=r+(l/2-a/2),i=n-d;break;case"top-right":u=r+l-a,i=n-d;break;case"left-top":u=r-a,i=n;break;case"left-center":u=r-a,i=n+(s/2-d/2);break;case"left-bottom":u=r-a,i=n+s-d;break;case"right-top":u=r+l,i=n;break;case"right-center":u=r+l,i=n+(s/2-d/2);break;case"right-bottom":u=r+l,i=n+s-d;break;case"bottom-left":u=r,i=n+s;break;case"bottom-center":u=r+(l/2-a/2),i=n+s;break;case"bottom-right":u=r+l-a,i=n+s}"left"===h[0]?u-=this.currentSlide.arrowSize+this.currentSlide.arrowOffset:"right"===h[0]?u+=this.currentSlide.arrowSize+this.currentSlide.arrowOffset:"top"===h[0]?i-=this.currentSlide.arrowSize+this.currentSlide.arrowOffset:"bottom"===h[0]&&(i+=this.currentSlide.arrowSize+this.currentSlide.arrowOffset),p={left:u,slidePosition:c,top:i};var S;if(S=this.checkSlidePositionExceed(p,e)){if(this.tmpCurrentSlidePosition||(this.tmpCurrentSlidePosition=this.currentSlide.position),this.tmpWinWidth=o.win.width,-1!==S.indexOf("left")||-1!==S.indexOf("right"))return e.width()>=this.currentSlide.minWidth?(e.width()<this.currentSlide.minWidthCSS&&e.addClass("minWidthCSS"),e.width(e.width()-10)):(e.removeClass("minWidthCSS"),e.attr("data-position","center-center"),e.width(this.currentSlide.width)),this.getSlidePosition(t,e)}else if(this.tmpCurrentSlidePosition&&e.attr("data-position",this.tmpCurrentSlidePosition),o.win.width>this.tmpWinWidth&&e.width()<this.currentSlide.width)return e.width()>=this.currentSlide.minWidthCSS&&e.removeClass("minWidthCSS"),e.width(e.width()+10),this.getSlidePosition(t,e);return p},moveOverlayOnResize:function(){var e=this;this.$tutorializeElements.find(".tutorialize-slide").each(function(){var i=t(this),o=t(i.attr("data-selector"));e.calculateSlideOverlay(o,!0)})},moveSlideOnResize:function(){var e=this;this.$tutorializeElements.find(".tutorialize-slide").each(function(){var i=t(this),o=i.find(".tutorialize-slide-arrow"),r=t(i.attr("data-selector"));e.setSlide_Position(r,i,o)})},nextSlide:function(t){var e=this,i=this.currentSlideIdx>=this.options.slides.length-1;return i&&"stop"===this.options.runEnd?(this.setRemember(0,this.options.rememberOnceOnly),void this.stop()):(this.currentSlideIdx=t?t:i?0:this.currentSlideIdx+1,console.log(this.currentSlideIdx),this.lastSlide=this.currentSlide,this.currentSlide=this.getSlideDefaultValues(this.options.slides[this.currentSlideIdx]),this.setRemember(this.currentSlideIdx),this.runSlide(),void("auto"===this.options.runMode&&(e.stSlidePlay=setTimeout(function(){e.nextSlide()},this.options.runDuration))))},prevSlide:function(){0===this.currentSlideIdx?this.currentSlideIdx=this.options.slides.length-1:this.currentSlideIdx--,this.lastSlide=this.currentSlide,this.currentSlide=this.getSlideDefaultValues(this.options.slides[this.currentSlideIdx]),this.setRemember(this.currentSlideIdx),this.runSlide()},runSlide:function(){var e=this,i=this.getDOMValues();this.tmpCurrentSlidePosition="",this.$tutorializeElements.empty().append(this.runSlide_BuildSlide());var o=this.$tutorializeElements.find(".tutorialize-slide"),r=o.find(".tutorialize-slide-arrow"),n=o.find(".tutorialize-slide-control"),l=t(this.currentSlide.selector);"auto"===this.currentSlide.width&&(this.currentSlide.width=o.width()),o.css({"background-color":this.currentSlide.bgColor,"border-radius":this.currentSlide.borderRadius,color:this.currentSlide.fontColor,"font-size":this.currentSlide.fontSize,height:"auto"==this.currentSlide.height?"auto":this.currentSlide.height,padding:this.currentSlide.padding,position:"fixed"===l.css("position")||"center-center"===this.currentSlide.position&&"html"===this.currentSlide.selector?"fixed":"absolute",width:"auto"==this.currentSlide.width?o.width():this.currentSlide.width}),r.css({"background-image":'url("'+this.currentSlide.arrowPath+'")',height:this.currentSlide.arrowSize,width:this.currentSlide.arrowSize}),n.find("li").css({"background-color":this.currentSlide.buttonBgColor}),n.find("li span").css({color:this.currentSlide.buttonFontColor});var s=this.setSlide_Position(l,o,r);"none"!=this.currentSlide.overlayMode&&this.calculateSlideOverlay(l);var a=s.top>=this.lastSlideScrollPosition?!1:!0,d=a?s.top:s.top+o.height();if(this.options.autoScroll&&"html"!==this.currentSlide.selector&&"fixed"!==l.css("position")&&(i.body.scrollTop>d||d>i.win.height+i.body.scrollTop)&&(d=a?d-this._scrollTopOffset:d+this._scrollTopOffset-i.win.height,t("html,body").animate({scrollTop:d},this.options.effectDelay)),this.lastSlideScrollPosition=s.top,this.lastSlide&&this.lastSlide.position===this.currentSlide.position){var u=".tutorialize-slide-content, .tutorialize-slide-control, .tutorialize-slide-title";o.show().find(u).hide().fadeIn(this.options.effectDelay)}else o.fadeIn(this.options.effectDelay);t.isFunction(this.currentSlide.onSlide)&&this.currentSlide.onSlide.apply(this,[this.currentSlideIdx,this.currentSlide,o]),o.find("ul li.prev span").on("click",function(i){i.preventDefault(),clearTimeout(e.stSlidePlay),t.isFunction(e.currentSlide.onPrev)?e.currentSlide.onPrev.apply(this,[e.currentSlideIdx,e.currentSlide,o]):e.prevSlide()}),o.find("ul li.next span").on("click",function(i){i.preventDefault(),clearTimeout(e.stSlidePlay),t.isFunction(e.currentSlide.onNext)?e.currentSlide.onNext.apply(this,[e.currentSlideIdx,e.currentSlide,o]):e.nextSlide()}),o.find("ul li.close span").on("click",function(t){t.preventDefault(),e.stop()})},runSlide_BuildControls:function(){var t=this.options.slides.length,e='<ul class="tutorialize-slide-control"><li class="counter">'+(this.currentSlideIdx+1)+"/"+t+"</li>"+(this.options.showButtonNext?'<li class="next"><span>'+(0===this.currentSlideIdx&&t>1?this.options.labelStart:this.currentSlideIdx!=t-1?this.options.labelNext:this.options.labelEnd)+"</span></li>":"")+(0!=(this.options.showButtonPrevious&&this.currentSlideIdx)?'<li class="prev"><span>'+this.options.labelPrevious+"</span></li>":"")+(this.options.showButtonClose?'<li class="close"><span>'+this.options.labelClose+"</span></li>":"")+"</ul>";return e},runSlide_BuildSlide:function(){return'<div class="tutorialize-slide '+this.options.theme+'" data-selector="'+this.currentSlide.selector+'" data-position="'+this.currentSlide.position+'"><span class="tutorialize-slide-arrow"></span>'+(this.currentSlide.title?'<div class="tutorialize-slide-title">'+this.currentSlide.title+"</div>":"")+'<div class="tutorialize-slide-content">'+this.currentSlide.content+"</div>"+this.runSlide_BuildControls()+"</div>"},setRemember:function(t,e){this.options.remember&&localStorage.setItem(this.options.rememberKeyName,JSON.stringify({currentSlideIdx:t,onceOnly:e?e:!1}))},setSlide_Position:function(t,e,i){var o=this.getSlidePosition(t,e);return this.currentSlide.position=o.slidePosition,arrowPosition=this.getArrowPosition(),e.css({top:o.top,left:o.left}),i.css({"background-position":"0 0",top:"auto",left:"auto",right:"auto",bottom:"auto",margin:"auto"}).css(arrowPosition),"center-center"===this.currentSlide.position?i.hide():i.show(),o},start:function(e){var i=this,o=this.getRemember();this.currentSlideIdx=o?o.currentSlideIdx-1:-1,o&&o.onceOnly||(i.nextSlide(e),t.isFunction(i.options.onStart)&&i.options.onStart.apply(i,[i.currentSlideIdx,i.currentSlide,this.$tutorializeElements.find(".tutorialize-slide")]))},stop:function(){t.isFunction(this.options.onStop)&&this.options.onStop.apply(this,[this.currentSlideIdx,this.currentSlide,this.$tutorializeElements.find(".tutorialize-slide")]),clearTimeout(this.stSlidePlay),this.$tutorializeElements.remove()}}}(jQuery);